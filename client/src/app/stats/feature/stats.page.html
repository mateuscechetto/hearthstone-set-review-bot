<div class="grid">
    <h1 class="col-12 flex-order-1 md:flex-order-0 md:col-6 md:col-offset-3 text-center"><a [routerLink]="['/home']" style="color: inherit; text-decoration: inherit;">
      {{ title }}
  </a></h1>
    <p-button class="col-3 col-offset-9 flex-order-0 md:flex-order-1 md:col-1 md:col-offset-2"
      *ngIf="loggedUser; else loginButton" label="Logout" (onClick)="logout()"></p-button>
    <ng-template #loginButton>
      <p-button class="col-3 col-offset-9 flex-order-0 md:flex-order-1 md:col-1 md:col-offset-2" label="Login"
        (onClick)="login()"></p-button>
    </ng-template>
</div>
<div class="grid md:ml-1 md:mr-1 mb-4">
    <div class="col-12 lg:col-10 lg:col-offset-1 flex-order-1">
      <p-table [value]="hotCards" [rows]="10" [paginator]="true">
        <ng-template pTemplate="caption">All Cards </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="hsClass" style="width:16.6%">Class <p-sortIcon field="hsClass"></p-sortIcon></th>
            <th pSortableColumn="name" style="width:50%">Name <p-sortIcon field="name"></p-sortIcon></th>
            <th pSortableColumn="avgRating" style="width:16.6%">Avg. <p-sortIcon field="avgRating"></p-sortIcon></th>
            <th pSortableColumn="standardDeviation" style="width:16.6%">SD <p-sortIcon
                field="standardDeviation"></p-sortIcon></th>
              <th pSortableColumn="ratings.length" style="width:10%">Ratings <p-sortIcon
                  field="ratings.length"></p-sortIcon></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-card>
          <tr [ngClass]="card.hsClass" pTooltip="<img src='{{card.imageURL}}' style='width: 180px'/>" [escape]="false" tooltipPosition="right">
            <td>{{card.hsClass}}</td>
            <td>{{card.name}}</td>
            <td>{{card.avgRating | number: '1.0-2' }}</td>
            <td>± {{card.standardDeviation | number: '1.0-2' }}</td>
            <td>{{card.ratings.length}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <div class="col-12 lg:col-10 lg:col-offset-1 flex-order-0 mb-4">
        <p-table [value]="ratingsByClass">
          <ng-template pTemplate="caption"> Best Classes </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="hsClass">Class <p-sortIcon field="hsClass"></p-sortIcon></th>
              <th pSortableColumn="avgRating">Avg. <p-sortIcon field="avgRating"></p-sortIcon></th>
              <th pSortableColumn="numRatings">Ratings <p-sortIcon field="numRatings"></p-sortIcon></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-class>
            <tr [ngClass]="class.hsClass">
              <td>{{class.hsClass}}</td>
              <td>{{class.avgRating | number: '1.0-2' }}</td>
              <td>{{class.numRatings}}</td>
            </tr>
          </ng-template>
        </p-table>
    </div>
</div>
<div class="banner">
      <h2>Ratings by Class</h2>
</div>
<div class="grid md:ml-1 md:mr-1">
  <div class="col-12 lg:col-6" *ngFor="let class of cardsByClass | keyvalue">
    <p-table [value]="class.value" [rows]="10" [paginator]="class.key == 'Neutral'">
      <ng-template pTemplate="caption">{{ class.key }} </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="avgRating">Avg. <p-sortIcon field="avgRating"></p-sortIcon></th>
          <th pSortableColumn="standardDeviation">SD <p-sortIcon
              field="standardDeviation"></p-sortIcon></th>
            <th pSortableColumn="ratings.length">Ratings <p-sortIcon
                field="ratings.length"></p-sortIcon></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-card>
        <tr [ngClass]="card.hsClass" pTooltip="<img src='{{card.imageURL}}' style='width: 180px'/>" [escape]="false" tooltipPosition="right">
          <td>{{card.name}}</td>
          <td>{{card.avgRating | number: '1.0-2' }}</td>
          <td>± {{card.standardDeviation | number: '1.0-2' }}</td>
          <td>{{card.ratings.length}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>